import {PolymerElement,html} from '@polymer/polymer';
import '@polymer/paper-slider/paper-slider.js';
import '@polymer/iron-swipeable-container/iron-swipeable-container.js';
import '@polymer/paper-material/paper-material.js';
import '@polymer/paper-card/paper-card.js';
import '@polymer/iron-icon/iron-icon.js';
import '@polymer/paper-button/paper-button.js';
import '@polymer/paper-dialog/paper-dialog.js';
import '@polymer/iron-list/iron-list.js';
import '@polymer/iron-scroll-threshold/iron-scroll-threshold.js';

class HelloWorld extends PolymerElement {
   static get template() {
      return html`
        <style>
          .cafe-header { @apply --paper-font-headline; }
          .cafe-light { color: var(--paper-grey-600); }
          .cafe-location {
                float: right;
                font-size: 15px;
                vertical-align: middle;
          }
           .block:hover {
                cursor: pointer;
                    }
          iron-list {
             width: 40%;
             margin-left: 30%;
             position: absolute;
           }
           .block{
                padding-bottom: 15px;
           }
        </style>
        <iron-scroll-threshold id="scrollTheshold" on-lower-threshold="_load" scroll-target="document">
//            <iron-list id="list" items="{{items}}" as="item" scroll-target="document">
//              <template>
//                  <div  class="block">
                       <iron-swipeable-container  on-iron-swipe="handleSwipe">
                        <template id="list" is="dom-repeat" items="{{items}}">
                            <paper-card>
                               <div class="card-content">
                                 <div class="cafe-header">{{item}}</div>
                                 <p>$ãƒ»Car Price</p>
                                 <p class="cafe-light">Small plates, salads &amp; sandwiches in an intimate setting with 12 indoor seats plus patio seating.</p>
                               </div>
                               <div class="card-actions">
                                    <p>Tonights availability</p>
                               </div>
                            </paper-card>
                            </template>
                       </iron-swipeable-container >
//                   </div
//              </template>
//            </iron-list>
        </iron-scroll-threshold>
      `;
    }
//

     _load (e) {
        this.$.list.items
        this.$server.loadMoreData(this.$.list.items.length);
        setTimeout(() => {
            this.$.scrollTheshold.clearTriggers();
        }, 500);
     }

        handleSwipe(e) {
            var i = e.model.__data.index;
            this.$server.deleteItem(i);
            this.$.list.notifyResize();
        }

  }

customElements.define('hello-world', HelloWorld);